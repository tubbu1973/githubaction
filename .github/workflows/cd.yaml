# .github/workflows/cd.yaml 
# This workflow defines the Continuous Deployment (CD) process. 
 
name: CD Workflow 
 
# 1. Trigger: This workflow runs only on pushes to the 'main' branch. 
# This means it will execute after a PR is merged into 'main'. 
on: 
  push: 
    branches: 
      - main 
 
# 2. Permissions: Grant the necessary permissions for the workflow to deploy to GitHub Pages. 
permissions: 
  contents: read 
  pages: write 
  id-token: write 
 
# 3. Job: Define the deployment job. 
jobs: 
  deploy: 
    runs-on: ubuntu-latest 
    environment: 
      name: github-pages 
      url: ${{ steps.deployment.outputs.page_url }} # The URL of the deployed page. 
 
    steps: 
      # Step 1: Checkout your repository code. 
      - name: Checkout repository 
        uses: actions/checkout@v4 
 
      # Step 2: Set up Node.js environment. 
      - name: Set up Node.js 
        uses: actions/setup-node@v4 
        with: 
          node-version: '18' 
          cache: 'npm' 
 
      # Step 3: Install project dependencies. 
      - name: Install dependencies 
        run: npm install 
 
      # Step 4: Build the project for production. 
      # The 'npm run build' command creates the 'dist' folder with your static site. 
      - name: Build project 
        run: npm run build 
 
      # Step 5: Configure GitHub Pages. 
      - name: Setup Pages 
        uses: actions/configure-pages@v5 
 
      # Step 6: Upload the build artifact. 
      # This action takes the contents of your 'dist' folder and prepares it for deployment. 
      - name: Upload artifact 
        uses: actions/upload-pages-artifact@v3 
        with: 
          path: './dist' 
 
      # Step 7: Deploy to GitHub Pages. 
      # This action pushes your built code to the 'gh-pages' branch and makes it live. 
      - name: Deploy to GitHub Pages 
        id: deployment 
        uses: actions/deploy-pages@v4 
